<template name="infiniteList">
	{{> navbarTop title=title}}
	<div class="content container-fluid">
		<div class="list" id="list">

			{{#if topLink}}
				<div class="row buttons-toppad">
					<div class="col-xs-12 buttons-top">
						{{#each topLink}}
							{{> topLinkButton}}
						{{/each}}
					</div>
				</div>
			{{/if}}

			{{#if searchUsers}}
				{{> searchUsersForm}}
			{{/if}}

			{{> infiniteBlock}}

		</div>
	</div>
	<div class="md-overlay gray"></div>
</template>

<template name="infiniteBlock">
	{{#with detectFirstPage}}
		{{#if pageDisplay}}
			<div class="row">
				<div class="col-xs-12 posts list-wrapper">
					{{#if foundUsers}}
						<h4>Utenti trovati</h4>
					{{/if}}
					<ul class="item-list">
						{{#each items}}
							{{#with joinWithAuthor}}
								{{> Template.dynamic template=../../viewTemplate}}
							{{/with}}
						{{else}}
							{{#unless searchUsers}}
								{{> emptyLi}}
							{{/unless}}
						{{/each}}
					</ul>
				</div>
			</div>
			{{> paginator}}
		{{else}}
			{{> loading}}
		{{/if}}
	{{/with}}
</template>

<template name="topLinkButton">
	<a href="{{pathFor path}}" {{attributes}}>{{label}}</a>
</template>

<template name="paginator">
	<div class="row">
		<div class="col-xs-12 helpbar gotopmore">
			{{#if hasMoreLinks}}
			<button class="load-more">
				{{#if pageReady}}
				<i class="fa fa-refresh"></i> Carica altri elementi
				{{else}}
				<i class="fa fa-refresh fa-spin"></i> Sto caricando...
				{{/if}}
			</button>
			{{/if}}
			<button class="thumb go-top">
				<i class="fa fa-arrow-up"></i>
			</button>
		</div>
	</div>
</template>